<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­´å² æ™‚ä»£ãƒ»èªå¥ãƒã‚¹ã‚¿ãƒ¼ã€å®Œå…¨ç‰ˆã€‘</title>
    <style>
        :root { --primary: #1a73e8; --success: #34a853; --error: #d93025; --bg: #f8f9fa; --text: #333; }
        body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: var(--bg); display: flex; justify-content: center; padding: 20px; color: var(--text); line-height: 1.4; }
        #app { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 100%; max-width: 650px; position: relative; }
        h1 { font-size: 1.25rem; text-align: center; color: var(--primary); margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-buttons { display: flex; justify-content: space-between; margin-bottom: 15px; gap: 10px; }
        .nav-btn { padding: 8px 15px; font-size: 0.85rem; border-radius: 6px; border: 1px solid #ccc; background: #fff; cursor: pointer; transition: 0.2s; }
        .nav-btn:hover { background: #f0f0f0; }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .menu-btn { padding: 18px 10px; background: white; border: 2px solid var(--primary); color: var(--primary); font-weight: bold; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: 0.2s; }
        .menu-btn:hover { background: var(--primary); color: white; }
        .special-btn { border-color: var(--error); color: var(--error); grid-column: span 2; }
        .special-btn:hover { background: var(--error); color: white; }
        .total-info { text-align: center; font-size: 0.9rem; color: #666; margin-bottom: 10px; background: #f0f7ff; padding: 10px; border-radius: 8px; }

        /* ã‚¯ã‚¤ã‚ºç”»é¢ */
        .stats-bar { display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 15px; padding: 10px; background: #eee; border-radius: 6px; font-weight: bold; }
        .q-box { margin-bottom: 20px; min-height: 150px; }
        .inst { font-weight: bold; color: var(--error); font-size: 0.85rem; margin-bottom: 8px; display: block; }
        .q-text { font-size: 1.15rem; font-weight: bold; margin-bottom: 15px; background: #fff; padding: 5px 0; }
        .choices { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .choice-btn { padding: 14px 10px; border: 1px solid #ccc; border-radius: 8px; background: #fff; cursor: pointer; transition: 0.15s; font-size: 0.95rem; display: flex; align-items: center; justify-content: center; text-align: center; }
        .choice-btn.selected { background: #e8f0fe; border-color: var(--primary); color: var(--primary); font-weight: bold; box-shadow: inset 0 0 0 1px var(--primary); }
        
        #submit-btn { width: 100%; margin-top: 20px; background: var(--primary); color: white; border: none; font-weight: bold; height: 50px; border-radius: 8px; display: none; cursor: pointer; font-size: 1.1rem; }
        
        /* ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
        #feedback { margin-top: 15px; padding: 15px; border-radius: 8px; display: none; border: 2px solid #ccc; }
        .res-ok { background: #e6f4ea; color: #1e7e34; border-color: #c3e6cb !important; }
        .res-ng { background: #fce8e6; color: #d93025; border-color: #f5c6cb !important; }
        .explanation-box { margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(0,0,0,0.1); font-size: 0.9rem; line-height: 1.6; }
        .sub-explanation { font-size: 0.8rem; color: #666; margin-top: 8px; background: rgba(255,255,255,0.5); padding: 5px; border-radius: 4px; }
        
        #next-btn { width: 100%; margin-top: 15px; background: var(--success); color: white; border: none; font-weight: bold; height: 50px; border-radius: 8px; cursor: pointer; font-size: 1.1rem; }
        
        /* çµæœç”»é¢ */
        .result-actions { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
        .retry-session-btn { background: #ff9800; color: white; border: none; height: 50px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        textarea { width: 100%; height: 120px; margin-top: 10px; font-size: 0.85rem; padding: 12px; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; background: #fafafa; }
        .reset-link { margin-top: 30px; display: block; font-size: 0.75rem; color: #999; text-decoration: underline; cursor: pointer; text-align: center; }

        @media (max-width: 480px) {
            .choices { grid-template-columns: 1fr; }
            .menu-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div id="app">
    <h1>æ­´å² æ™‚ä»£ãƒ»èªå¥ãƒã‚¹ã‚¿ãƒ¼</h1>

    <div id="nav-area" class="nav-buttons" style="display:none;">
        <button class="nav-btn" onclick="backToMenu()">ğŸ  ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸</button>
        <button id="prev-btn" class="nav-btn" onclick="prevQuestion()">ğŸ”™ å‰ã®å•é¡Œ</button>
    </div>

    <div id="menu-ui">
        <div class="total-info">
            å…¨ <span id="total-q-count">0</span> å•ã‚’20å•ãšã¤ã«åˆ†å‰²ã—ã¾ã—ãŸã€‚<br>
            ç¾åœ¨ã®è‹¦æ‰‹é …ç›®æ•°: <span id="weak-count">0</span> ä»¶
        </div>
        <div id="menu-grid" class="menu-grid">
            <button class="menu-btn special-btn" onclick="startWeaknessMode()">è‹¦æ‰‹å…‹æœãƒ¢ãƒ¼ãƒ‰<br><small>(ãƒŸã‚¹ã—ãŸå•é¡Œã®ã¿å‡ºé¡Œ)</small></button>
        </div>
        <span class="reset-link" onclick="resetAllData()">ã“ã‚Œã¾ã§ã®å…¨å­¦ç¿’è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆ</span>
    </div>

    <div id="quiz-ui" style="display:none;">
        <div class="stats-bar">
            <span><span id="set-name">ç¬¬1å›</span> : <span id="cur-num">0</span> / <span id="max-num">20</span></span>
            <span>æ­£ç­”: <span id="score">0</span></span>
        </div>
        <div class="q-box">
            <span id="inst" class="inst"></span>
            <div id="q-text" class="q-text"></div>
            <div id="choices-grid" class="choices"></div>
        </div>
        <button id="submit-btn" onclick="checkAnswer()">å›ç­”ã‚’ç¢ºå®šã™ã‚‹</button>
        <div id="feedback">
            <div id="res-msg" style="font-weight:bold; font-size: 1.2rem;"></div>
            <div id="correct-info" style="margin: 5px 0; font-weight: bold;"></div>
            <div id="explanation-text" class="explanation-box"></div>
            <button id="next-btn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸é€²ã‚€</button>
        </div>
    </div>

    <div id="result-ui" style="display:none; text-align:center;">
        <h2 style="color: var(--primary);">ã‚»ãƒƒãƒˆçµ‚äº†ï¼</h2>
        <p id="final-score" style="font-size: 1.3rem; font-weight: bold; margin: 10px 0;"></p>
        
        <div class="result-actions">
            <button id="retry-mistakes-btn" class="retry-session-btn" onclick="retryThisSessionMistakes()">ã“ã®ã‚»ãƒƒãƒˆã®ãƒŸã‚¹ã ã‘ã‚’è§£ãç›´ã™</button>
            <button class="menu-btn" style="width:100%; border:none; background:var(--primary); color:white;" onclick="backToMenu(true)">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹ï¼ˆæ¬¡ã®å›ã¸ï¼‰</button>
        </div>

        <div style="text-align:left; margin-top:25px; border-top: 1px solid #eee; padding-top:15px;">
            <p style="font-size:0.9rem; font-weight:bold;">ğŸ¤– Geminiç”¨ãƒ»å¾©ç¿’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:</p>
            <p style="font-size:0.75rem; color:#666;">ã‚³ãƒ”ãƒ¼ã—ã¦Geminiã«é€ã‚‹ã¨è©³ã—ã„è§£èª¬ãŒã‚‚ã‚‰ãˆã¾ã™ã€‚</p>
            <textarea id="gemini-prompt" readonly onclick="this.select()"></textarea>
        </div>
    </div>
</div>

<script>
/**
 * 125é …ç›®ã®å…¨ãƒ‡ãƒ¼ã‚¿ï¼ˆæ¦‚è¦èª¬æ˜ä»˜ãï¼‰
 */
const rawData = [
    { era: "å¼¥ç”Ÿ", term: "ç¨²ä½œã®åºƒã¾ã‚Š", note: "å¤§é™¸ã‹ã‚‰ä¼æ¥ã€‚é£Ÿæ–™ç”Ÿç”£ã®å®‰å®šã«ã‚ˆã‚Šå®šä½ã‚„è²§å¯Œã®å·®ã€å›½ãŒç”Ÿã¾ã‚ŒãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "é£›é³¥", term: "å…¨å›½ã®æˆ¸ç±ãŒåˆã‚ã¦ä½œã‚‰ã‚Œã‚‹", note: "åºšåˆå¹´ç±ãªã©ã€å¾‹ä»¤å›½å®¶ã¨ã—ã¦äººæ°‘ã‚’æŠŠæ¡ã—å¾´ç¨ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¥ˆè‰¯", term: "å£åˆ†ç”°ã‹ã‚‰ã®é€ƒäº¡", note: "é‡ã„ç¨ï¼ˆç§Ÿãƒ»èª¿ãƒ»åº¸ï¼‰ã‚„å…µå½¹ã‹ã‚‰é€ƒã‚Œã‚‹ãŸã‚ã€è¾²æ°‘ãŒåœŸåœ°ã‚’é›¢ã‚ŒãŸç¾è±¡ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¥ˆè‰¯", term: "æœ¨ç°¡", note: "å¢¨ã§æ–‡å­—ãŒæ›¸ã‹ã‚ŒãŸæœ¨ã®æœ­ã€‚è·æœ­ã‚„è¡Œæ”¿è¨˜éŒ²ã¨ã—ã¦å„åœ°ã‹ã‚‰å¤šæ•°å‡ºåœŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¹³å®‰", term: "æ­¦å£«ã®ç™»å ´", note: "åœ°æ–¹ã®æ²»å®‰æ‚ªåŒ–ã«å¯¾ã—ã€æœ‰åŠ›è¾²æ°‘ã‚„è²´æ—ãŒæ­¦è£…ã—ã¦è‡ªè¡›ã—ãŸã“ã¨ãŒå§‹ã¾ã‚Šã€‚", cat: "ç¤¾ä¼š" },
    { era: "éŒå€‰", term: "äºŒæ¯›ä½œãŒè¥¿æ—¥æœ¬ã«åºƒã¾ã‚‹", note: "ç±³ã®è£ä½œã¨ã—ã¦éº¦ãªã©ã‚’æ ½åŸ¹ã€‚è¥¿æ—¥æœ¬ã‚’ä¸­å¿ƒã«ç”Ÿç”£åŠ›ãŒå‘ä¸Šã—ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "äºŒæ¯›ä½œãŒå…¨å›½ã«åºƒã¾ã‚‹", note: "è‚¥æ–™ã®æ”¹è‰¯ï¼ˆä¸‹è‚¥ï¼‰ãªã©ã«ã‚ˆã‚Šã€å…¨å›½çš„ã«å¹´2å›ã®æ ½åŸ¹ãŒå¯èƒ½ã«ãªã£ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "æƒ£", note: "æ‘ã®æœ‰åŠ›è€…ã‚’ä¸­å¿ƒã«å½¢æˆã•ã‚ŒãŸã€è¾²æ°‘ã®è‡ªå¾‹çš„ãªæ‘ã®çµ„ç¹”ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "ç”ºè¡†", note: "äº¬éƒ½ãªã©ã®éƒ½å¸‚éƒ¨ã§ã€è±Šã‹ãªå•†å·¥æ¥­è€…ã‚’ä¸­å¿ƒã«çµæˆã•ã‚ŒãŸè‡ªæ²»çµ„ç¹”ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "åº§", note: "å•†å·¥æ¥­è€…ãŒåˆ©ç›Šã‚’å®ˆã‚‹ãŸã‚ã«çµæˆã—ãŸçµ„åˆã€‚å¯ºç¤¾ãªã©ã‚’ä¿è­·è€…ã¨ã—ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "é–¢æ‰€ï¼ˆç¨ã‚’å–ã‚‹ï¼‰", note: "äº¤é€šã®è¦æ‰€ã«è¨­ç½®ã•ã‚Œã€é€šè¡Œäººã‹ã‚‰é–¢éŠ­ï¼ˆç¨ï¼‰ã‚’å¾´åã—ãŸå ´æ‰€ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "ï¼ˆæ­£é•·ã®ï¼‰åœŸä¸€æ†", note: "1428å¹´ã€é¦¬å€Ÿã‚’ä¸­å¿ƒã«å€Ÿé‡‘ã®å¸³æ¶ˆã—ï¼ˆå¾³æ”¿ï¼‰ã‚’æ±‚ã‚ã¦èµ·ããŸæœ€åˆã®ä¸€æ†ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "ï¼ˆåŠ è³€ã®ï¼‰ä¸€å‘ä¸€æ†", note: "æµ„åœŸçœŸå®—ã®é–€å¾’ãŒå®ˆè­·ã‚’å€’ã—ã€ç´„100å¹´ã«ã‚ãŸã‚ŠåŠ è³€ã‚’æ”¯é…ã—ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "å¤ªé–¤æ¤œåœ°", note: "è±Šè‡£ç§€å‰ãŒå…¨å›½ã®ç”°ç•‘ã®é¢ç©ã‚„åç©«é‡ã‚’çµ±ä¸€åŸºæº–ã§èª¿æŸ»ã—ãŸäº‹æ¥­ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "åç©«é«˜ã‚’çŸ³é«˜ã§è¡¨ã™", note: "å¤ªé–¤æ¤œåœ°ã«ã‚ˆã‚Šã€ç±³ã®åç©«é‡ã‚’ã€ŒçŸ³ã€ã¨ã„ã†å˜ä½ã§è¡¨ã™çŸ³é«˜åˆ¶ãŒç¢ºç«‹ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "äº”äººçµ„", note: "æ•°æˆ¸ã‚’1çµ„ã¨ã—ã€å¹´è²¢ç´å…¥ã‚„çŠ¯ç½ªé˜²æ­¢ã«ã¤ã„ã¦é€£å¸¯è²¬ä»»ã‚’è² ã‚ã›ãŸåˆ¶åº¦ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "è±å£å»»èˆ¹ãƒ»æ¨½å»»èˆ¹", note: "å¤§é˜ªã¨æ±Ÿæˆ¸ã‚’çµã‚“ã å®šæœŸè²¨ç‰©èˆ¹ã€‚æ—¥ç”¨å“ã‚„é…’ãªã©ã‚’ä¸»ã«é‹ã‚“ã ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "åŒ—å‰èˆ¹", note: "æ—¥æœ¬æµ·ã‚’é€šã£ã¦åŒ—æµ·é“ã®æµ·ç”£ç‰©ã‚„ç±³ã‚’å¤§é˜ªã¸é‹ã‚“ã è¥¿å»»ã‚Šèˆªè·¯ã®å•†èˆ¹ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "æ–°ç”°é–‹ç™º", note: "å¹•åºœã‚„è—©ã®å¥¨åŠ±ã«ã‚ˆã‚Šã€å¹²æ‹“ã‚„é–‹å¢¾ã‚’è¡Œã£ã¦è€•åœ°é¢ç©ã‚’æ‹¡å¤§ã•ã›ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "å¹²é°¯ï¼ˆã»ã—ã‹ï¼‰", note: "ã‚¤ãƒ¯ã‚·ã‚’ä¹¾ç‡¥ã•ã›ãŸè‚¥æ–™ã€‚ç¶¿èŠ±ãªã©ã®å•†å“ä½œç‰©ã®æ ½åŸ¹ã«åˆ©ç”¨ã•ã‚ŒãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "åä¸»ãƒ»çµ„é ­ãƒ»ç™¾å§“ä»£", note: "ã€Œæ‘å½¹äººï¼ˆæ‘æ–¹ä¸‰å½¹ï¼‰ã€ã¨å‘¼ã°ã‚Œã€æ‘ã®è¡Œæ”¿ã‚„å¹´è²¢ã®å¾´åã‚’æ‹…å½“ã—ãŸäººã€…ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "ç™¾å§“ä¸€æ†", note: "é‡ã„å¹´è²¢ã‚„ä¸æ­£ã«å¯¾ã—ã€è¾²æ°‘ãŒé›†å›£ã§è¨´ãˆãŸã‚Šæš´å‹•ã‚’èµ·ã“ã™ã“ã¨ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "æ ªä»²é–“", note: "å¹•åºœã®å…¬èªã‚’å¾—ã¦ç‹¬å è²©å£²æ¨©ã‚’æŒã£ãŸå•†å·¥æ¥­è€…ã®çµ„åˆã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "å•å±‹åˆ¶å®¶å†…å·¥æ¥­", note: "å•†äººãŒè¾²æ°‘ã«åŸæ–™ã‚„é“å…·ã‚’è²¸ã—ä¸ãˆã€è£½å“ã‚’è²·ã„å–ã‚‹ç”Ÿç”£å½¢æ…‹ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "ä¸¡æ›¿å•†", note: "é‡‘ãƒ»éŠ€ãƒ»éŠ­ã®äº¤æ›ã‚„é é‡‘ã€è²¸ã—ä»˜ã‘ã‚’è¡Œã£ãŸã€‚å¤§é˜ªã‚’ä¸­å¿ƒã«ç™ºé”ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¼¥ç”Ÿ", term: "é«˜åºŠå€‰åº«", note: "æ¹¿æ°—ã‚„ãƒã‚ºãƒŸã‹ã‚‰åç©«ã—ãŸç±³ã‚’å®ˆã‚‹ãŸã‚ã«åºŠã‚’é«˜ãã—ãŸå»ºç‰©ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¼¥ç”Ÿ", term: "çŸ³åŒ…ä¸", note: "ç¨²ã®ç©‚å…ˆã‚’æ‘˜ã¿å–ã‚‹ãŸã‚ã®çŸ³è£½ã®é“å…·ã€‚ç´ã‚’é€šã™ç©´ãŒã‚ã‚‹ã®ãŒç‰¹å¾´ã€‚", cat: "ç¤¾ä¼š" },
    { era: "é£›é³¥", term: "å¯Œæœ¬éŠ­ãŒç™ºè¡Œã•ã‚Œã‚‹", note: "7ä¸–ç´€å¾ŒåŠã«ä½œã‚‰ã‚ŒãŸã€ç¾å­˜ã™ã‚‹æ—¥æœ¬æœ€å¤ã®é‹³é€ è²¨å¹£ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¥ˆè‰¯", term: "å’ŒåŒé–‹çãŒæµé€šã™ã‚‹", note: "708å¹´ã«ä½œã‚‰ã‚ŒãŸã€å¾‹ä»¤æ”¿åºœã«ã‚ˆã‚‹æœ¬æ ¼çš„ãªæµé€šè²¨å¹£ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¥ˆè‰¯", term: "ç§Ÿãƒ»èª¿ãƒ»åº¸", note: "å¾‹ä»¤æ™‚ä»£ã®ç¨åˆ¶ã€‚ç§Ÿã¯ç±³ã€èª¿ã¯ç‰¹ç”£å“ã€åº¸ã¯å¸ƒãªã©ã‚’ç´ã‚ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "éŒå€‰", term: "å®šæœŸå¸‚ï¼ˆæœˆã«3å›ï¼‰", note: "äº¤é€šã®è¦æ‰€ãªã©ã§æ±ºã¾ã£ãŸæ—¥ã«é–‹ã‹ã‚ŒãŸå¸‚å ´ã€‚ä¸‰æ–å¸‚ã¨å‘¼ã°ã‚ŒãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "å®šæœŸå¸‚ï¼ˆæœˆã«6å›ï¼‰", note: "ç”Ÿç”£åŠ›å‘ä¸Šã«ã‚ˆã‚Šé »åº¦ãŒå¢—ãˆãŸå¸‚å ´ã€‚å…­æ–å¸‚ã¨å‘¼ã°ã‚ŒãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "å•ï¼ˆå•ä¸¸ï¼‰", note: "æ¸¯ãªã©ã§å•†å“ã®ä¿ç®¡ã€é‹é€ã€å¸å£²ãªã©ã‚’è¡Œã£ãŸé‹é€æ¥­è€…ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "é¦¬å€Ÿãƒ»è»Šå€Ÿ", note: "é¦¬ã‚„è»Šã‚’ä½¿ã£ã¦è·ç‰©ã‚’é‹ã‚“ã è¼¸é€æ¥­è€…ã€‚ä¸€æ†ã®ä¸»åŠ›ã«ã‚‚ãªã£ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "åœŸå€‰ãƒ»é…’å±‹", note: "é«˜åˆ©è²¸ã—ã‚’è¡Œã£ãŸæ¥­è€…ã€‚å¹•åºœã®é‡è¦ãªè²¡æºã§ã‚‚ã‚ã£ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "æ˜éŠ­ãŒæµé€šã™ã‚‹", note: "æ—¥æ˜è²¿æ˜“ã«ã‚ˆã£ã¦å¤§é‡ã«æµå…¥ã—ãŸã€æ°¸æ¥½é€šå®ãªã©ã®ä¸­å›½è²¨å¹£ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å¤å¢³", term: "æ¸¡æ¥äºº", note: "å¤§é™¸ã‚„æœé®®åŠå³¶ã‹ã‚‰ç§»ä½ã—ã€åœŸæœ¨ãƒ»æ–‡å­—ãªã©ã®æŠ€è¡“ã‚’ä¼ãˆãŸäººã€…ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®¤ç”º", term: "çŸ³è¦‹éŠ€å±±ã®é–‹ç™º", note: "16ä¸–ç´€ã«ç°å¹æ³•ãŒå°å…¥ã•ã‚Œã€ä¸–ç•Œæœ‰æ•°ã®ç”£å‡ºé‡ã‚’èª‡ã£ãŸéŠ€å±±ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "æ¥½å¸‚ãƒ»æ¥½åº§", note: "ç¹”ç”°ä¿¡é•·ã‚‰ãŒå¸‚å ´ã®ç‹¬å æ¨©ã‚’å»ƒæ­¢ã—ã€å•†å£²ã‚’è‡ªç”±ã«ã—ãŸæ”¿ç­–ã€‚", cat: "ç¤¾ä¼š" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "è˜åœ’ã®æ¶ˆå¤±", note: "å¤ªé–¤æ¤œåœ°ã«ã‚ˆã‚Šä¸€åœ°ä¸€ä½œäººãŒå¾¹åº•ã•ã‚Œã€è¤‡é›‘ãªè˜åœ’åˆ¶ãŒçµ‚ç„‰ã—ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "è¥¿å»»ã‚Šãƒ»æ±å»»ã‚Šèˆªè·¯", note: "æ²³æ‘ç‘è³¢ãŒé–‹æ‹“ã—ãŸã€æ—¥æœ¬å„åœ°ã®ç‰©è³‡ã‚’æ±Ÿæˆ¸ã¸é‹ã¶æµ·ä¸Šãƒ«ãƒ¼ãƒˆã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "äº”è¡—é“", note: "æ—¥æœ¬æ©‹ã‚’èµ·ç‚¹ã¨ã™ã‚‹æ±æµ·é“ãƒ»ä¸­å±±é“ãªã©5ã¤ã®ä¸»è¦ãªå¹¹ç·šé“è·¯ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "è”µå±‹æ•·", note: "è«¸è—©ãŒç‰¹ç”£å“ã‚„å¹´è²¢ç±³ã‚’è²©å£²ã™ã‚‹ãŸã‚ã«éƒ½å¸‚ã«è¨­ç½®ã—ãŸæ‹ ç‚¹ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "é£›è„š", note: "æ‰‹ç´™ã‚„è·ç‰©ã‚’é‹ã‚“ã é€šä¿¡ãƒ»è¼¸é€æ¥­è€…ã€‚å¹•åºœç”¨ã‚„æ°‘é–“ç”¨ãŒã‚ã£ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "å‚™ä¸­ãã‚", note: "æ·±ãè€•ã›ã‚‹ã‚ˆã†ã«åˆƒãŒæ•°æœ¬ã«åˆ†ã‹ã‚Œã¦ã„ã‚‹ã€é‰„è£½ã®é¬ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "åƒæ­¯ã“ã", note: "ç¨²ã®ç©‚ã‚’æŒŸã‚“ã§å¼•ãæŠœãã ã‘ã§åŠ¹ç‡ã‚ˆãè„±ç©€ã§ãã‚‹è¾²å…·ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "å•†å“ä½œç‰©", note: "ç¶¿ãƒ»èŒ¶ãƒ»è—ãªã©ã€è²©å£²ã‚’ç›®çš„ã¨ã—ãŸä½œç‰©ã®æ ½åŸ¹ãŒç››ã‚“ã«ãªã£ãŸã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "èª­ã¿ãƒ»æ›¸ããƒ»ãã‚ã°ã‚“", note: "å¯ºå­å±‹ãªã©ã§åº¶æ°‘ã«åºƒãæ™®åŠã—ãŸã€å½“æ™‚ã®å®Ÿç”¨çš„ãªæ•™è‚²ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "æ‰“ã¡ã“ã‚ã—", note: "éƒ½å¸‚éƒ¨ã§ç±³ä¾¡é«˜é¨°ã«æ€’ã£ãŸè²§æ°‘ãŒç±³å±‹ãªã©ã‚’è¥²æ’ƒã™ã‚‹ã“ã¨ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ±Ÿæˆ¸", term: "å·¥å ´åˆ¶æ‰‹å·¥æ¥­", note: "å·¥å ´ã«äººã‚’é›†ã‚ã€æ‰‹ä½œæ¥­ã®åˆ†æ¥­ã§è£½å“ã‚’ä½œã‚‹å½¢æ…‹ã€‚", cat: "ç¤¾ä¼š" },
    { era: "æ—§çŸ³å™¨", term: "å²©å®¿éºè·¡", note: "ç›¸æ²¢å¿ æ´‹ãŒç™ºè¦‹ã€‚æ—¥æœ¬ã«æ—§çŸ³å™¨æ™‚ä»£ãŒã‚ã£ãŸã“ã¨ã‚’è¨¼æ˜ã—ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "ç¸„æ–‡", term: "ä¸‰å†…ä¸¸å±±éºè·¡", note: "é’æ£®çœŒã«ã‚ã‚‹å¤§è¦æ¨¡é›†è½è·¡ã€‚å¤§å‹æ˜ç«‹æŸ±å»ºç‰©ãªã©ãŒç™ºè¦‹ã•ã‚ŒãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å¼¥ç”Ÿ", term: "å‰é‡ãƒ¶é‡Œéºè·¡", note: "ä½è³€çœŒã«ã‚ã‚‹å¤§è¦æ¨¡ãªç’°æ¿ é›†è½è·¡ã€‚å¼¥ç”Ÿæ™‚ä»£ã®å›½ã®æ§˜å­ã‚’ä¼ãˆã‚‹ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¼¥ç”Ÿ", term: "éŠ…é¸", note: "ã¤ã‚Šä¸‹ã’ã¦é³´ã‚‰ã—ãŸã‚Šã€ç¥­ç¥€ã«ä½¿ã‚ã‚ŒãŸã¨ã•ã‚Œã‚‹é’éŠ…å™¨ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¤å¢³", term: "é ˆæµå™¨", note: "æœé®®åŠå³¶ã‹ã‚‰ä¼ã‚ã£ãŸæŠ€è¡“ã§ã€é«˜æ¸©ã§ç„¼ã‹ã‚ŒãŸç¡¬ã„ç°è‰²ã®åœŸå™¨ã€‚", cat: "æ–‡åŒ–" },
    { era: "é£›é³¥", term: "æ³•éš†å¯º", note: "è–å¾³å¤ªå­ãŒå»ºç«‹ã€‚ä¸–ç•Œæœ€å¤ã®æœ¨é€ å»ºç¯‰ç‰©ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã‚‹ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "æ±å¤§å¯º", note: "è–æ­¦å¤©çš‡ãŒå»ºç«‹ã€‚å¤§ä»ï¼ˆç›§èˆé‚£ä»ï¼‰ã‚’å®‰ç½®ã—ãŸç·å›½åˆ†å¯ºã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "å›½åˆ†å¯ºãƒ»å›½åˆ†å°¼å¯º", note: "è–æ­¦å¤©çš‡ã®å‘½ã«ã‚ˆã‚Šã€å›½å®¶ã®å®‰å®šã‚’é¡˜ã£ã¦å…¨å›½ã«è¨­ç½®ã•ã‚ŒãŸå¯ºé™¢ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "æ ¡å€‰é€ ", note: "ä¸‰è§’æ–­é¢ã®æã‚’çµ„ã‚“ã æ§˜å¼ã€‚æ­£å€‰é™¢ãªã©ã€æ¹¿æ°—èª¿ç¯€ã«å„ªã‚Œã‚‹ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "ä¸‡è‘‰é›†", note: "å¤©çš‡ã‹ã‚‰è¾²æ°‘ã¾ã§å¹…åºƒã„å±¤ã®æ­Œã‚’åã‚ãŸæ—¥æœ¬æœ€å¤ã®å’Œæ­Œé›†ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "å¯æ®¿é€ ", note: "è²´æ—ã®ä½å®…æ§˜å¼ã€‚ä¸­å¿ƒã®å¯æ®¿ã‚’å»Šä¸‹ã§ã¤ãªãã€åº­åœ’ã‚’é…ç½®ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "å¤ä»Šå’Œæ­Œé›†", note: "é†é†å¤©çš‡ã®å‘½ã§ç´€è²«ä¹‹ã‚‰ãŒç·¨é›†ã—ãŸã€æœ€åˆã®å‹…æ’°å’Œæ­Œé›†ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "å¹³ç­‰é™¢é³³å‡°å ‚", note: "è—¤åŸé ¼é€šãŒå»ºç«‹ã€‚é˜¿å¼¥é™€å ‚ãŒæ¥µæ¥½æµ„åœŸã‚’è±¡å¾´ã—ã¦ã„ã‚‹ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "ä¸­å°Šå¯ºé‡‘è‰²å ‚", note: "å¥¥å·å¹³æ³‰ã«å»ºç«‹ã€‚å…¨é¢é‡‘ç®”æŠ¼ã—ã®å¥¥å·è—¤åŸæ°ã®æ „è¯ã®è±¡å¾´ã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "æ±å¤§å¯ºå—å¤§é–€", note: "é‡æºãŒå†å»ºã€‚ã€Œå¤§ä»æ§˜ï¼ˆå¤©ç«ºæ§˜ï¼‰ã€ã¨ã„ã†åŠ›å¼·ã„æ§˜å¼ãŒç‰¹å¾´ã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "è¸Šã‚Šå¿µä»", note: "ä¸€éãŒå§‹ã‚ãŸã€è¸Šã‚ŠãªãŒã‚‰å¿µä»ã‚’å”±ãˆã¦æ•‘ã„ã‚’æ±‚ã‚ã‚‹å½¢å¼ã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "æ–°å¤ä»Šå’Œæ­Œé›†", note: "å¾Œé³¥ç¾½ä¸Šçš‡ã®å‘½ã§è—¤åŸå®šå®¶ã‚‰ãŒç·¨é›†ã€‚ç¹Šç´°ãªæŠ€å·§ãŒç‰¹å¾´ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "èƒ½ï¼ˆèƒ½æ¥½ï¼‰", note: "è¦³é˜¿å¼¥ãƒ»ä¸–é˜¿å¼¥è¦ªå­ãŒçŒ¿æ¥½ã‚’æ´—ç·´ã•ã›ã€å¤§æˆã—ãŸä»®é¢åŠ‡ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "æ›¸é™¢é€ ", note: "ç•³ãƒ»åºŠã®é–“ãƒ»è¥–ãªã©ã€ç¾åœ¨ã®æ—¥æœ¬ä½å®…ã®åŸå‹ã¨ãªã£ãŸæ§˜å¼ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "ãŠä¼½è‰å­", note: "å®¤ç”ºæ™‚ä»£ã®æŒ¿çµµå…¥ã‚Šã®çŸ­ã„ç‰©èªã€‚åº¶æ°‘ã«è¦ªã—ã¾ã‚ŒãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "åƒåˆ©ä¼‘", note: "ç¹”ç”°ä¿¡é•·ãƒ»è±Šè‡£ç§€å‰ã®èŒ¶é ­ã€‚ã€Œã‚ã³èŒ¶ã€ã®ç²¾ç¥ã‚’å¤§æˆã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "æµ®ä¸–è‰å­", note: "äº•åŸè¥¿é¶´ãŒå§‹ã‚ãŸã€ç”ºäººã®ç”Ÿæ´»ã‚„æ¬²ã‚’ãƒªã‚¢ãƒ«ã«æã„ãŸå°èª¬ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "æµ®ä¸–çµµ", note: "æ±Ÿæˆ¸æ™‚ä»£ã®ç”ºäººæ–‡åŒ–ã‹ã‚‰ç”Ÿã¾ã‚ŒãŸçµµç”»ã€‚ç¾äººç”»ã‚„é¢¨æ™¯ç”»ãªã©ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "éŒ¦çµµ", note: "éˆ´æœ¨æ˜¥ä¿¡ãŒå®Œæˆã•ã›ãŸã€å¤šè‰²åˆ·ã‚Šã®é®®ã‚„ã‹ãªæµ®ä¸–çµµç‰ˆç”»ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "è§£ä½“æ–°æ›¸", note: "æ‰ç”°ç„ç™½ã‚‰ãŒã‚ªãƒ©ãƒ³ãƒ€ã®è§£å‰–æ›¸ã‚’ç¿»è¨³ã—ãŸæœ¬æ ¼çš„ç¿»è¨³æ›¸ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ—§çŸ³å™¨", term: "æ‰“è£½çŸ³å™¨", note: "çŸ³ã‚’æ‰“ã¡æ¬ ã„ã¦ä½œã£ãŸé“å…·ã€‚ãƒŠã‚¤ãƒ•å½¢çŸ³å™¨ãªã©ãŒã‚ã‚‹ã€‚", cat: "æ–‡åŒ–" },
    { era: "ç¸„æ–‡", term: "ç£¨è£½çŸ³å™¨", note: "çŸ³ã‚’ç£¨ã„ã¦å½¢ã‚’æ•´ãˆãŸé“å…·ã€‚ç”¨é€”ã«åˆã‚ã›ã¦åŠ å·¥ã•ã‚ŒãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å¤å¢³", term: "ä»æ•™ä¼æ¥", note: "6ä¸–ç´€åŠã°ã€ç™¾æ¸ˆã®è–æ˜ç‹ã‹ã‚‰é‡ˆè¿¦åƒã‚„çµŒå…¸ãŒä¼ãˆã‚‰ã‚ŒãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "å¤©å¹³æ–‡åŒ–", note: "è–æ­¦å¤©çš‡æœŸã«æ „ãˆãŸã€å”ã®å½±éŸ¿ã‚’å¼·ãå—ã‘ãŸå›½éš›çš„ãªæ–‡åŒ–ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "é‘‘çœŸ", note: "å”ã®åƒ§ã€‚5å›ã®å¤±æ•—ã¨å¤±æ˜ã‚’ä¹—ã‚Šè¶Šãˆã¦æ¥æ—¥ã—ã€æˆ’å¾‹ã‚’ä¼ãˆãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "é¢¨åœŸè¨˜", note: "å„åœ°ã®åœ°åã®ç”±æ¥ã€ç‰¹ç”£ç‰©ã€ä¼æ‰¿ãªã©ã‚’æ”¿åºœã«å ±å‘Šã•ã›ãŸè¨˜éŒ²ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "å›½é¢¨æ–‡åŒ–", note: "é£å”ä½¿å»ƒæ­¢å¾Œã€æ—¥æœ¬ã®é¢¨åœŸã«åˆã‚ã›ãŸç‹¬è‡ªã®å„ªé›…ãªæ–‡åŒ–ã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "é‹æ…¶ãƒ»å¿«æ…¶", note: "æ±å¤§å¯ºå—å¤§é–€ã®é‡‘å‰›åŠ›å£«åƒãªã©ã§çŸ¥ã‚‰ã‚Œã‚‹åŠ›å¼·ã„å½«åˆ»å®¶ã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "ä¸€é", note: "æ™‚å®—ã®é–‹ç¥–ã€‚å…¨å›½ã‚’æ­©ãï¼ˆéŠè¡Œï¼‰ã€è¸Šã‚Šå¿µä»ã‚’åºƒã‚ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "å¹³å®¶ç‰©èª", note: "å¹³æ°ã®ç¹æ „ã¨æ»…äº¡ã‚’æã„ãŸè»è¨˜ç‰©èªã€‚çµç¶æ³•å¸«ãŒèªã‚Šåºƒã‚ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "åŒ—å±±æ–‡åŒ–", note: "è¶³åˆ©ç¾©æº€æœŸã€‚é‡‘é–£ã«è±¡å¾´ã•ã‚Œã‚‹ã€å…¬å®¶ã¨æ­¦å®¶ã®èåˆã—ãŸæ–‡åŒ–ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "è¦³é˜¿å¼¥ãƒ»ä¸–é˜¿å¼¥", note: "ç¾©æº€ã®ä¿è­·ã‚’å—ã‘ã€çŒ¿æ¥½ã‹ã‚‰ã€Œèƒ½ã€ã‚’ç¢ºç«‹ã—ãŸçˆ¶å­ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "æ±å±±æ–‡åŒ–", note: "è¶³åˆ©ç¾©æ”¿æœŸã€‚éŠ€é–£ã«è±¡å¾´ã•ã‚Œã‚‹ã€ã‚ã³ãƒ»ã•ã³ã‚’é‡ã‚“ã˜ã‚‹ç¾ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "é›ªèˆŸ", note: "æ°´å¢¨ç”»ã‚’å¤§æˆã€‚æ—¥æœ¬ã®è‡ªç„¶ã‚’å–ã‚Šå…¥ã‚ŒãŸç”»é¢¨ã‚’ç¢ºç«‹ã—ãŸåƒ§ä¾¶ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "å—è›®æ–‡åŒ–", note: "å—è›®è²¿æ˜“ã‚’é€šã˜ã¦ä¼ã‚ã£ãŸã€ã‚­ãƒªã‚¹ãƒˆæ•™ã‚„è¥¿æ¬§ã®é¢¨ä¿—ãƒ»æŠ€è¡“ã€‚", cat: "æ–‡åŒ–" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "ç‹©é‡æ°¸å¾³", note: "è±ªè¯ã§åŠ›å¼·ã„ç­†è‡´ã®å”ç…å­å›³ãªã©ã‚’æã„ãŸå®‰åœŸæ¡ƒå±±æœŸã®ç”»å®¶ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "å…ƒç¦„æ–‡åŒ–", note: "17ä¸–ç´€å¾ŒåŠã®ä¸Šæ–¹ã‚’ä¸­å¿ƒã«æ „ãˆãŸã€æ´»æ°—ã‚ã‚‹ç”ºäººä¸»ä½“ã®æ–‡åŒ–ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "äº•åŸè¥¿é¶´", note: "ç”ºäººã®ç”Ÿãæ–¹ã‚’ãƒªã‚¢ãƒ«ã«æã„ãŸæµ®ä¸–è‰å­ã®ä½œè€…ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "è±å·å¸«å®£", note: "ã€è¦‹è¿”ã‚Šç¾äººå›³ã€ãªã©ã§çŸ¥ã‚‰ã‚Œã‚‹ã€æµ®ä¸–çµµã‚’ç¢ºç«‹ã—ãŸç”»å®¶ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "è¿‘æ¾é–€å·¦è¡›é–€", note: "ç¾©ç†äººæƒ…ã‚’æã„ãŸäººå½¢æµ„ç‘ ç’ƒã‚„æ­Œèˆä¼ã®è„šæœ¬å®¶ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "ä¿µå±‹å®—é”", note: "è£…é£¾çš„ãªç³æ´¾ã®å…ˆé§†çš„ç”»å®¶ã€‚ã€é¢¨ç¥é›·ç¥å›³ã€ãŒæœ‰åã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "åŒ–æ”¿æ–‡åŒ–", note: "19ä¸–ç´€å‰åŠã®æ±Ÿæˆ¸ã‚’ä¸­å¿ƒã«æ „ãˆãŸã€é¢¨åˆºã‚’å¥½ã‚€æˆç†Ÿã—ãŸæ–‡åŒ–ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "æ­Œå·ï¼ˆå®‰è—¤ï¼‰åºƒé‡", note: "ã€æ±æµ·é“äº”åä¸‰æ¬¡ã€ãªã©ã§çŸ¥ã‚‰ã‚Œã‚‹æƒ…ç·’çš„ãªæµ®ä¸–çµµå¸«ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "æœ¬å±…å®£é•·", note: "ã€å¤äº‹è¨˜ä¼ã€ã‚’è‘—ã—ã€æ—¥æœ¬æœ¬æ¥ã®ç²¾ç¥ã‚’ç ”ç©¶ã™ã‚‹ã€Œå›½å­¦ã€ã‚’å¤§æˆã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "ä¼Šèƒ½å¿ æ•¬", note: "å®Ÿæ¸¬ã«åŸºã¥ãç²¾å¯†ãªæ—¥æœ¬åœ°å›³ã€å¤§æ—¥æœ¬æ²¿æµ·è¼¿åœ°å…¨å›³ã€ã‚’ä½œè£½ã€‚", cat: "æ–‡åŒ–" },
    { era: "ç¸„æ–‡", term: "è²å¡š", note: "ç¸„æ–‡æ™‚ä»£ã®ã‚´ãƒŸæ¨ã¦å ´ã€‚å½“æ™‚ã®é£Ÿç”Ÿæ´»ã‚’çŸ¥ã‚‹è²´é‡ãªéºè·¡ã€‚", cat: "æ–‡åŒ–" },
    { era: "ç¸„æ–‡", term: "åœŸå¶", note: "ç´ ç„¼ãã®äººå½¢ã€‚å®‰ç”£ã‚„è±Šä½œã®ç¥ˆã‚Šã«ä½¿ã‚ã‚ŒãŸã¨ã•ã‚Œã‚‹ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¤å¢³", term: "ã¯ã«ã‚ï¼ˆåŸ´è¼ªï¼‰", note: "å¤å¢³ã«ä¸¦ã¹ã‚‰ã‚ŒãŸç„¼ãç‰©ã€‚äººç‰©ã€å‹•ç‰©ã€å®¶ãªã©ãŒã‚ã‚‹ã€‚", cat: "æ–‡åŒ–" },
    { era: "é£›é³¥", term: "æœ€åˆã®ä»æ•™æ–‡åŒ–", note: "é£›é³¥åœ°æ–¹ã‚’ä¸­å¿ƒã«æ „ãˆãŸä»æ•™èŠ¸è¡“ï¼ˆé£›é³¥æ–‡åŒ–ï¼‰ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "æ­£å€‰é™¢", note: "æ±å¤§å¯ºã«ã‚ã‚‹ã€è–æ­¦å¤©çš‡ã®éºå“ã‚„å¤§é™¸ã®å®ç‰©ã‚’åã‚ã‚‹å€‰åº«ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¥ˆè‰¯", term: "å¤äº‹è¨˜ãƒ»æ—¥æœ¬æ›¸ç´€", note: "æ—¥æœ¬æœ€å¤ã®æ­´å²æ›¸ã€‚å¤äº‹è¨˜ã¯ç‰©èªèª¿ã€æ—¥æœ¬æ›¸ç´€ã¯æ­£å¼ãªæ¼¢æ–‡ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "çœŸè¨€å®—", note: "ç©ºæµ·ãŒé«˜é‡å±±ã«é‡‘å‰›å³¯å¯ºã‚’é–‹ã„ãŸå¯†æ•™ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "å¤©å°å®—", note: "æœ€æ¾„ãŒæ¯”å¡å±±ã«å»¶æš¦å¯ºã‚’é–‹ã„ãŸä»æ•™ã€‚éŒå€‰æ–°ä»æ•™ã®æ¯ä½“ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "ã‹ãªæ–‡å­—", note: "æ¼¢å­—ã‚’å´©ã—ã¦ä½œã‚‰ã‚ŒãŸæ–‡å­—ã€‚æ—¥æœ¬ç‹¬è‡ªã®æ–‡å­¦ãŒç™ºé”ã€‚", cat: "æ–‡åŒ–" },
    { era: "å¹³å®‰", term: "æµ„åœŸä¿¡ä»°", note: "ã€Œå—ç„¡é˜¿å¼¥é™€ä»ã€ã§æ¥µæ¥½æµ„åœŸã¸è¡Œã‘ã‚‹ã¨èª¬ãã€æœ«æ³•æ€æƒ³æœŸã®æ•™ãˆã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "å¾’ç„¶è‰", note: "å…¼å¥½æ³•å¸«ï¼ˆå‰ç”°å…¼å¥½ï¼‰ã«ã‚ˆã‚‹ã€è‡ªç„¶ã‚„äººç”Ÿè¦³ã‚’ç¶´ã£ãŸéšç­†ã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "æµ„åœŸå®—", note: "æ³•ç„¶ãŒé–‹ãã€ã²ãŸã™ã‚‰å¿µä»ã‚’å”±ãˆã‚‹ã€Œå°‚ä¿®å¿µä»ã€ã‚’èª¬ã„ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "æµ„åœŸçœŸå®—", note: "è¦ªé¸ãŒé–‹ãã€ã€Œæ‚ªäººæ­£æ©Ÿã€ã‚’èª¬ã„ã¦è¾²æ°‘ã«åºƒãæ™®åŠã—ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "è‡¨æ¸ˆå®—", note: "æ „è¥¿ãŒä¼ãˆã€åº§ç¦…ã¨å…¬æ¡ˆï¼ˆå•ã„ï¼‰ã‚’é‡è¦–ã€‚æ­¦å£«ã®æ”¯æŒã‚’å¾—ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "æ›¹æ´å®—", note: "é“å…ƒãŒä¼ãˆã€ã²ãŸã™ã‚‰åº§ç¦…ã‚’çµ„ã‚€ã€Œåªç®¡æ‰“åã€ã‚’èª¬ã„ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "éŒå€‰", term: "æ—¥è“®å®—", note: "æ—¥è“®ãŒé–‹ãã€é¡Œç›®ã‚’å”±ãˆã‚‹ã“ã¨ã§å›½å®¶ã¨å€‹äººã®æ•‘ã„ã‚’èª¬ã„ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "æ°´å¢¨ç”»", note: "å¢¨ã®æ¿ƒæ·¡ã®ã¿ã§æãã€‚é›ªèˆŸã«ã‚ˆã£ã¦æ—¥æœ¬ç‹¬è‡ªã®ã‚‚ã®ã¨ãªã£ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "ç‹‚è¨€", note: "èƒ½ã®åˆé–“ã«æ¼”ã˜ã‚‰ã‚Œã‚‹æ»‘ç¨½ãªå¯¸åŠ‡ã€‚åº¶æ°‘ã®ãŸãã¾ã—ã•ã‚’æãã€‚", cat: "æ–‡åŒ–" },
    { era: "å®¤ç”º", term: "é€£æ­Œ", note: "è¤‡æ•°ã®äººãŒæ­Œã‚’ã¤ãªã’ã¦ã„ãæ–‡èŠ¸ã€‚é›†å›£æ–‡åŒ–ã¨ã—ã¦æ™®åŠã€‚", cat: "æ–‡åŒ–" },
    { era: "å®‰åœŸæ¡ƒå±±", term: "å‡ºé›²ã®é˜¿å›½", note: "äº¬éƒ½ã§ã€Œã‹ã¶ãè¸Šã‚Šã€ã‚’æŠ«éœ²ã—ã€æ­Œèˆä¼ã®ãƒ«ãƒ¼ãƒ„ã‚’ä½œã£ãŸã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "å·æŸ³ãƒ»ç‹‚æ­Œ", note: "ç¤¾ä¼šã‚’é‹­ãã€æ»‘ç¨½ã«è¡¨ç¾ã—ãŸçŸ­ã„è©©ã€‚åŒ–æ”¿æ–‡åŒ–ã§æµè¡Œã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "å°¾å½¢å…‰ç³", note: "ç³æ´¾ã‚’ä»£è¡¨ã™ã‚‹ç”»å®¶ã€‚ã€ç‡•å­èŠ±å›³å±é¢¨ã€ãªã©ãŒæœ‰åã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "è‘›é£¾åŒ—æ–", note: "ã€å¯Œå¶½ä¸‰åå…­æ™¯ã€ã§æœ‰åãªã€å¤§èƒ†ãªæ§‹å›³ãŒç‰¹å¾´ã®æµ®ä¸–çµµå¸«ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "è˜­å­¦", note: "ã‚ªãƒ©ãƒ³ãƒ€èªã‚’é€šã˜ã¦ã€è¥¿æ¬§ã®åŒ»å­¦ã‚„ç§‘å­¦ã‚’ç ”ç©¶ã—ãŸå­¦å•ã€‚", cat: "æ–‡åŒ–" },
    { era: "æ±Ÿæˆ¸", term: "å›½å­¦", note: "å¤å…¸ã‚’ç ”ç©¶ã—ã€æ—¥æœ¬æœ¬æ¥ã®ç²¾ç¥ã‚’æ¢æ±‚ã—ãŸå­¦å•ã€‚", cat: "æ–‡åŒ–" }
];

let allQuestions = [];
let sessionQueue = [];
let lastMistakes = []; 
let globalMistakeRecords = JSON.parse(localStorage.getItem('hist_mistakes_final')) || {}; 
let history = []; 
let currentIndex = 0;
let score = 0;
let selectedTerms = [];

function init() {
    let pool = [];
    const eras = [...new Set(rawData.map(d => d.era))];
    
    rawData.forEach(item => {
        const id = `${item.era}_${item.term}`;
        // 1. èªå¥ã‹ã‚‰æ™‚ä»£ã‚’å½“ã¦ã‚‹ (SINGLE)
        pool.push({
            id: `S_${id}`,
            type: 'SINGLE',
            term: item.term,
            correct: item.era,
            note: item.note,
            cat: item.cat
        });
    });

    // 2. æ™‚ä»£ã‹ã‚‰èªå¥ã‚’é¸ã¶ (MULTI) - å„æ™‚ä»£ã«ã¤ã„ã¦1å•ãšã¤ä½œæˆ
    eras.forEach(e => {
        const correctTerms = rawData.filter(d => d.era === e).map(d => d.term);
        pool.push({
            id: `M_${e}`,
            type: 'MULTI',
            era: e,
            correct: correctTerms,
            note: `${e}ã®ä¸»è¦ãªèªå¥ã®çµ„ã¿åˆã‚ã›å•é¡Œã§ã™ã€‚`
        });
    });

    allQuestions = pool; 
    document.getElementById('total-q-count').innerText = allQuestions.length;
    document.getElementById('weak-count').innerText = Object.keys(globalMistakeRecords).length;

    const menuGrid = document.getElementById('menu-grid');
    const totalSets = Math.ceil(allQuestions.length / 20);
    for (let i = 0; i < totalSets; i++) {
        const btn = document.createElement('button');
        btn.className = 'menu-btn';
        btn.innerText = `ç¬¬ ${i + 1} å›`;
        btn.onclick = () => startSession(i);
        menuGrid.appendChild(btn);
    }
}

function startSession(setIdx) {
    // ã‚»ãƒƒãƒˆã”ã¨ã«å•é¡Œã‚’å›ºå®šã—ãŸã„å ´åˆã¯ã“ã“ã‚’èª¿æ•´ï¼ˆä»Šã¯ãƒ©ãƒ³ãƒ€ãƒ ã«20å•ï¼‰
    const shuffled = shuffle([...allQuestions]);
    sessionQueue = shuffled.slice(setIdx * 20, (setIdx + 1) * 20);
    startQuiz(`ç¬¬ ${setIdx + 1} å›`);
}

function startWeaknessMode() {
    const weakPool = allQuestions.filter(q => globalMistakeRecords[q.id]);
    if (weakPool.length === 0) {
        alert("ã¾ã è‹¦æ‰‹ãªå•é¡ŒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã‚’ãƒ—ãƒ¬ã‚¤ã—ã¦ãã ã•ã„ï¼");
        return;
    }
    sessionQueue = shuffle(weakPool).slice(0, 20);
    startQuiz("è‹¦æ‰‹å…‹æœãƒ¢ãƒ¼ãƒ‰");
}

function retryThisSessionMistakes() {
    if (lastMistakes.length === 0) return;
    sessionQueue = shuffle([...lastMistakes]);
    startQuiz("ã‚»ãƒƒã‚·ãƒ§ãƒ³å†æŒ‘æˆ¦");
}

function startQuiz(name) {
    document.getElementById('menu-ui').style.display = 'none';
    document.getElementById('result-ui').style.display = 'none';
    document.getElementById('quiz-ui').style.display = 'block';
    document.getElementById('nav-area').style.display = 'flex';
    document.getElementById('set-name').innerText = name;
    document.getElementById('max-num').innerText = sessionQueue.length;
    currentIndex = 0; score = 0; history = []; lastMistakes = [];
    renderQuestion();
}

function renderQuestion() {
    if (currentIndex >= sessionQueue.length) { showResult(); return; }
    let q = sessionQueue[currentIndex];
    selectedTerms = [];
    
    document.getElementById('cur-num').innerText = currentIndex + 1;
    document.getElementById('score').innerText = score;
    document.getElementById('feedback').style.display = 'none';
    document.getElementById('prev-btn').disabled = (currentIndex === 0);

    const grid = document.getElementById('choices-grid');
    grid.innerHTML = '';

    // é¸æŠè‚¢ã®ç”Ÿæˆã¨å›ºå®š
    if (!q.sessionChoices) {
        if (q.type === 'MULTI') {
            // æ™‚ä»£ -> èªå¥(è¤‡æ•°)
            const allTerms = rawData.map(d => d.term);
            let corrects = shuffle([...q.correct]).slice(0, 3);
            let dummies = shuffle(allTerms.filter(t => !q.correct.includes(t))).slice(0, 5);
            q.sessionChoices = shuffle([...corrects, ...dummies]);
            q.correctInSession = corrects;
        } else {
            // èªå¥ -> æ™‚ä»£
            const allEras = [...new Set(rawData.map(d => d.era))];
            q.sessionChoices = shuffle([...allEras]);
        }
    }

    if (q.type === 'MULTI') {
        document.getElementById('inst').innerText = "ã€è¤‡æ•°é¸æŠã€‘å½“ã¦ã¯ã¾ã‚‹ã‚‚ã®ã‚’å…¨ã¦é¸ã³ã€Œç¢ºå®šã€ã‚’æŠ¼ã—ã¦ãã ã•ã„";
        document.getElementById('q-text').innerText = `ã€Œ${q.era}ã€ã«å±ã™ã‚‹èªå¥ã¯ã©ã‚Œï¼Ÿ`;
        document.getElementById('submit-btn').style.display = 'block';
    } else {
        document.getElementById('inst').innerText = "ã€æ™‚ä»£é¸æŠã€‘æ­£ã—ã„æ™‚ä»£ã‚’é¸æŠã—ã¦ãã ã•ã„";
        document.getElementById('q-text').innerText = `ã€Œ${q.term}ã€ã®æ™‚ä»£ã¯ã„ã¤ï¼Ÿ`;
        document.getElementById('submit-btn').style.display = 'none';
    }

    q.sessionChoices.forEach(c => {
        const b = document.createElement('button');
        b.className = 'choice-btn';
        b.innerText = c;
        b.onclick = () => {
            if (q.type === 'MULTI') {
                b.classList.toggle('selected');
                if (selectedTerms.includes(c)) selectedTerms = selectedTerms.filter(i => i !== c);
                else selectedTerms.push(c);
            } else {
                selectedTerms = [c];
                checkAnswer();
            }
        };
        grid.appendChild(b);
    });
}

function checkAnswer() {
    const q = sessionQueue[currentIndex];
    let isCorrect = false;
    
    if (q.type === 'MULTI') {
        isCorrect = selectedTerms.length === q.correctInSession.length && 
                    selectedTerms.every(s => q.correctInSession.includes(s));
    } else {
        isCorrect = selectedTerms[0] === q.correct;
    }

    history[currentIndex] = isCorrect;
    
    if (!isCorrect) {
        globalMistakeRecords[q.id] = true;
        lastMistakes.push(q);
    } else {
        // æ­£è§£ã—ãŸå ´åˆã¯è‹¦æ‰‹ãƒªã‚¹ãƒˆã‹ã‚‰é™¤å¤–ã™ã‚‹ã‹æ¤œè¨ï¼ˆã“ã“ã§ã¯ç¶­æŒï¼‰
    }
    localStorage.setItem('hist_mistakes_final', JSON.stringify(globalMistakeRecords));

    const fb = document.getElementById('feedback');
    fb.style.display = 'block';
    document.getElementById('submit-btn').style.display = 'none';
    
    score = history.filter(h => h === true).length;
    document.getElementById('score').innerText = score;

    const resMsg = document.getElementById('res-msg');
    resMsg.innerText = isCorrect ? "ã€‡ æ­£è§£ï¼" : "Ã— ä¸æ­£è§£";
    fb.className = isCorrect ? "res-ok" : "res-ng";

    const correctStr = q.type === 'MULTI' ? q.correctInSession.join('ã€') : q.correct;
    document.getElementById('correct-info').innerText = `æ­£è§£: ${correctStr}`;
    
    // è§£èª¬æ–‡
    let expHTML = `<strong>è§£èª¬:</strong> ${q.note || "ï¼ˆã“ã®æ™‚ä»£ãƒ»èªå¥ã®çµ„ã¿åˆã‚ã›ã‚’è¦šãˆã¾ã—ã‚‡ã†ï¼‰"}`;
    if (q.type === 'SINGLE') {
        const otherTerms = rawData.filter(d => d.era === q.correct && d.term !== q.term).map(d => d.term).slice(0, 8);
        if(otherTerms.length > 0) {
            expHTML += `<div class="sub-explanation"><strong>åŒã˜${q.correct}ã®èªå¥:</strong><br>${otherTerms.join('ã€')} ãªã©</div>`;
        }
    }
    document.getElementById('explanation-text').innerHTML = expHTML;
}

function nextQuestion() {
    currentIndex++;
    renderQuestion();
}

function prevQuestion() {
    if (currentIndex > 0) {
        currentIndex--;
        renderQuestion();
    }
}

function backToMenu(skip = false) {
    if (skip || confirm("ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿç¾åœ¨ã®é€²æ—ã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚")) {
        location.reload();
    }
}

function resetAllData() {
    if (confirm("ã“ã‚Œã¾ã§ã®è‹¦æ‰‹è¨˜éŒ²ã‚’ã™ã¹ã¦æ¶ˆå»ã—ã¾ã™ã‹ï¼Ÿ")) {
        localStorage.clear();
        location.reload();
    }
}

function showResult() {
    document.getElementById('quiz-ui').style.display = 'none';
    document.getElementById('nav-area').style.display = 'none';
    document.getElementById('result-ui').style.display = 'block';
    document.getElementById('final-score').innerText = `${sessionQueue.length}å•ä¸­ ${score} å•æ­£è§£`;
    
    const retryBtn = document.getElementById('retry-mistakes-btn');
    retryBtn.style.display = lastMistakes.length > 0 ? "block" : "none";

    let promptText = "";
    if (lastMistakes.length > 0) {
        promptText = `ä»¥ä¸‹ã®æ­´å²ç”¨èªã‚’é–“é•ãˆã¦ã—ã¾ã„ã¾ã—ãŸã€‚å„ç”¨èªãŒãªãœãã®æ™‚ä»£ã«åˆ†é¡ã•ã‚Œã‚‹ã®ã‹ã€èƒŒæ™¯ã‚„é–¢é€£äº‹é …ã‚’å«ã‚ã¦è©³ã—ãè§£èª¬ã—ã¦ãã ã•ã„ã€‚\n\nã€é–“é•ãˆãŸé …ç›®ã€‘\n`;
        lastMistakes.forEach(m => {
            promptText += m.type === 'MULTI' ? `ãƒ»${m.era}ã®ä¸»è¦èªå¥ã®åˆ¤åˆ¥\n` : `ãƒ»${m.term}ï¼ˆæ™‚ä»£ï¼š${m.correct}ï¼‰\n`;
        });
    } else {
        promptText = "å…¨å•æ­£è§£ã—ã¾ã—ãŸï¼ã•ã‚‰ã«æ­´å²ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã«ã€ã“ã®æ™‚ä»£ã®é¢ç™½ã„ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚";
    }
    document.getElementById('gemini-prompt').value = promptText;
}

function shuffle(a) {
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
}

// èµ·å‹•
init();

</script>
</body>
</html>
